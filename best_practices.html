<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Best Practices</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-1.1/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-1.1/highlight.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}

.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Data Science I</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Topics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="topic_what_is_data_science.html">What is Data Science?</a>
    </li>
    <li>
      <a href="topic_building_blocks.html">Building Blocks</a>
    </li>
    <li>
      <a href="topic_data_wrangling.html">Data Wrangling</a>
    </li>
    <li>
      <a href="topic_visualization_and_eda.html">Visualization and EDA</a>
    </li>
    <li>
      <a href="topic_collaboration.html">Collaboration</a>
    </li>
    <li>
      <a href="topic_more_advanced_r.html">More Advanced R</a>
    </li>
    <li>
      <a href="topic_interactivity.html">Interactivity</a>
    </li>
    <li>
      <a href="topic_other.html">Other Topics</a>
    </li>
  </ul>
</li>
<li>
  <a href="papers.html">Homework</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Datasets
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="dataset_mr_trash_wheel.html">Mr. Trash Wheel</a>
    </li>
    <li>
      <a href="dataset_restaurant_inspections.html">NYC Restaurant Inspections</a>
    </li>
    <li>
      <a href="dataset_instacart.html">Instacart</a>
    </li>
    <li>
      <a href="dataset_fivethirtyeight.html">FiveThirtyEight</a>
    </li>
    <li>
      <a href="dataset_noaa.html">NOAA</a>
    </li>
    <li>
      <a href="dataset_airbnb.html">Airbnb</a>
    </li>
  </ul>
</li>
<li>
  <a href="http://github.com/jeff-goldsmith/DSI/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Best Practices</h1>

</div>


<p>Before starting more complex analyses and projects, you should establish some good habits.</p>
<div id="some-slides" class="section level2">
<h2>Some slides</h2>
<script async class="speakerdeck-embed" data-id="74bdf749fff0470a8b61662d7dc31edc" data-ratio="1.33333333333333" src="//speakerdeck.com/assets/embed.js"></script>
<div style="margin-bottom:5px">
<strong> <a href="https://speakerdeck.com/jeffgoldsmith/dsi-best-practices" title="Best Practices" target="_blank">Best Practices</a> </strong> from <strong><a href="https://speakerdeck.com/jeffgoldsmith" target="_blank">Jeff Goldsmith</a></strong>.
</div>
<p><br></p>
</div>
<div id="example" class="section level2">
<h2>Example</h2>
<div id="revisiting-old-examples" class="section level3">
<h3>Revisiting old examples</h3>
<p>Last class we introduced several vectors. Looking at these with a critical eye, they’re not particularly well-named – it’s impossible to know the relationship between <code>vec1</code> and <code>vec4</code> without looking at them, and already I’ve forgotten which vector did what.</p>
<pre class="r"><code>vec1 = 5:8
vec2 = c(&quot;My&quot;, &quot;name&quot;, &quot;is&quot;, &quot;Jeff&quot;)
vec3 = c(TRUE, TRUE, TRUE, FALSE)
vec4 = factor(c(&quot;male&quot;, &quot;male&quot;, &quot;female&quot;, &quot;female&quot;))</code></pre>
<p>Let’s rename, and tidy up a bit while we’re at it – you really don’t want to have a cluttered workspace, because you will forget what things are. This is also a good time to point out Rstudio’s tabbed autocompletion – start typing a variable name and press Tab.</p>
<pre class="r"><code>vec_numeric = 5:8
vec_char = c(&quot;My&quot;, &quot;name&quot;, &quot;is&quot;, &quot;Jeff&quot;)
vec_logical = c(TRUE, TRUE, TRUE, FALSE)
vec_factor = factor(c(&quot;male&quot;, &quot;male&quot;, &quot;female&quot;, &quot;female&quot;))

ls()
##  [1] &quot;l&quot;           &quot;mat1&quot;        &quot;mat2&quot;        &quot;mat3&quot;        &quot;vec&quot;        
##  [6] &quot;vec_char&quot;    &quot;vec_factor&quot;  &quot;vec_logical&quot; &quot;vec_numeric&quot; &quot;vec1&quot;       
## [11] &quot;vec2&quot;        &quot;vec3&quot;        &quot;vec4&quot;        &quot;x&quot;           &quot;y&quot;
rm(list = c(&quot;vec1&quot;, &quot;vec2&quot;, &quot;vec3&quot;, &quot;vec4&quot;))
ls()
##  [1] &quot;l&quot;           &quot;mat1&quot;        &quot;mat2&quot;        &quot;mat3&quot;        &quot;vec&quot;        
##  [6] &quot;vec_char&quot;    &quot;vec_factor&quot;  &quot;vec_logical&quot; &quot;vec_numeric&quot; &quot;x&quot;          
## [11] &quot;y&quot;</code></pre>
</div>
<div id="organizing-code-into-readable-scripts" class="section level3">
<h3>Organizing code into readable scripts</h3>
<p>You should <em>always</em> keep the complete code that was used for an analysis or project, no matter how brief. Your scripts should be self-contained – they should include everything you did to produce what you wanted to produce. The two scripts below repeat content from a previous example.</p>
<pre class="r"><code>##################################################################
# June 2, 2017
# Jeff Goldsmith
#
# Script exploring vector classes
##################################################################

## create vectors
vec_numeric = 5:8
vec_char = c(&quot;My&quot;, &quot;name&quot;, &quot;is&quot;, &quot;Jeff&quot;)
vec_logical = c(TRUE, TRUE, TRUE, FALSE)
vec_factor = factor(c(&quot;male&quot;, &quot;male&quot;, &quot;female&quot;, &quot;female&quot;))

## check class of vectors
class(vec_numeric)
class(vec_char)
class(vec_logical)
class(vec_factor)

## convert factor to numeric
as.numeric(vec_factor)</code></pre>
<p>Note use of <code>snake_case</code> naming convention. Whatever naming convention you like best, get in the habit of using it consistently.</p>
<pre class="r"><code>##################################################################
# June 2, 2017
# Jeff Goldsmith
#
# Script producing basic plots
##################################################################

## set seed to ensure reproducibility
set.seed(1234)

## define x and y
x = rnorm(1000)
y = 1 + 2 * x + rnorm(1000, 0, .4)

## histogram of x
hist(x)

## scatterplot of y against x
plot(x, y)</code></pre>
<p>The scripts above illustrate some “best practices” that you should adopt:</p>
<ul>
<li>There is a brief section at the outset identifying the author, giving the date, and providing a brief description of the content.</li>
<li>Each script includes comments describing each block or chunk</li>
<li>Variable names are reasonable in the context of the script</li>
<li>The code iteslf is easy-to-read – adequate spacing within and between lines of code. (Turn on code diagnositics if you haven’t already; this can be found in Preferences &gt; Code &gt; Diagnostics.)</li>
</ul>
<p>The organization of code into self-contained scripts is itself part of a bigger picture. Rather than focusing on the variables (or plots, or even complete analyses), focus on the code that produces them. Given whatever inputs you have (none for now, although later there will be data), your code should reliably produce whatever outputs you want.</p>
<p>To check how “real” your scripts are, clear out your workspace using <code>rm(list = ls())</code> and re-run everything. If everything works, great; if not, address the issue by editing your script. I do this frequently, and often start scripts with a line that clears the workspace.</p>
<p>R will, by default, save everything in your workspace. I strongly suggest you turn this behavior off (Preferences &gt; General &gt; Save Workspace: Never). First, doing so will remove a crutch early on and help you focus on your scripts. Second, saving your workspace automatically and doing so in the background can get you in trouble if (or when) you deal with patient data.</p>
<p>A final word about scripts – not every line of code you write will (or should) make it to your scripts. It can take a few attempts to get code you like, and you don’t need to save the intermediate stuff. You also don’t need to save every bit of exploratory analysis you do – keep the stuff that improved your understanding, but discard the rest.</p>
</div>
<div id="organizing-projects" class="section level3">
<h3>Organizing projects</h3>
<p>Your projects will generally consist of several related files – input data, scripts, results. It’s important to keep these organized, so you can find everything you need quickly and easily. R Projects, through RStudio, give you an easy way to do this.</p>
<p>Create a directory and save the previous two scripts into that directory. Script names, like variable names, should be descriptive (e.g. <code>20170602_data_classes.R</code> and <code>20170602_simple_plots.R</code>). The directory name should be descriptive as well, and it should be in a reasonable place on your computer (e.g. <code>~/Documents/First_Project/</code>). Create an R Project using File &gt; New Project &gt; Existing Directory and specifying the directory you just created.</p>
<p>For now, the best part about R Projects is that they force you to think about and organize the elements you need for your analysis or project. Double-clicking the new <code>.Rproj</code> file will launch the R Project; you’ll see a Files tab in the usual Plots / Packages / Help / Viewer pane. Later, we’ll find R Projects useful in other ways.</p>
</div>
<div id="paths-and-your-working-directory" class="section level3">
<h3>Paths and your working directory</h3>
<p>To this point, we’ve been working entirely inside RStudio without a need to access anything on your computer. That’s allowed us to avoid a discussion of your Working Directory, but now we’ll address that too. As you’re working, R is sitting inside a single directory on your computer – it can find files in that directory or output files to that directory. Check your current working directory using.</p>
<pre class="r"><code>getwd()</code></pre>
<p>If you’ve opened your R Project, that should be your working directory. That’s great! Another bit of encouragement to keep your stuff organized. This means that anything you output will be written to this directory:</p>
<pre class="r"><code>plot(x, y)
dev.print(pdf, &quot;scatter_plot.pdf&quot;, height = 4, width = 4)</code></pre>
<p>With larger projects, it can be useful to create sub-directories for your project (e.g. <code>Data</code> and <code>Figures</code>) – you don’t need to worry about that for now, but when you do this use relative paths to keep everything self-contained.</p>
<p>Note that we exported a figure using a command, rather than clicking the Export in the Plots tab. This is intentional – whatever your script produces, it should do so exclusively from the code you’ve written.</p>
</div>
<div id="workflow" class="section level3">
<h3>Workflow</h3>
<p>All this together suggests a workflow. For every new project (and I mean <em>every new project</em>), do the following:</p>
<ul>
<li>Create a directory with a reasonable name and path (e.g. <code>~/Documents/School/DSI/Homework_2/</code>)</li>
<li>Put an R Project in the directory</li>
<li>Keep everything related to the analysis – data inputs, scripts, reports, output – in there</li>
<li>Periodically check for reproducibility of the analysis</li>
</ul>
<p>Starting this habit early will save you a <em>ton</em> of headaches along the road. If you find yourself not using R, everything about except the R Project part holds.</p>
</div>
</div>
<div id="other-materials" class="section level2">
<h2>Other materials</h2>
<p>This content draws on the work of others; there are also useful references for a lot of this online.</p>
<ul>
<li>Jenny Bryan’s <a href="https://www.slideshare.net/jenniferbryan5811/cm002-deep-thoughts">deep thoughts</a> on data analytic work</li>
<li>Also, her intro to <a href="http://stat545.com/block002_hello-r-workspace-wd-project.html">workspaces, the working directory, and R Projects</a></li>
<li>Also also, her slides on <a href="https://speakerdeck.com/jennybc/how-to-name-files">how to name files</a></li>
<li>The R for Data Science workflows on <a href="http://r4ds.had.co.nz/workflow-scripts.html">scripts</a> and <a href="http://r4ds.had.co.nz/workflow-projects.html">projects</a></li>
<li>RStudio’s guide to <a href="https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects">using projects</a></li>
<li>Lastly, the BEH <a href="https://beh.columbia.edu/2016/08/03/commandments-for-variable-naming-and-data-management/">Commandments for Variable Naming and Data Management</a> make a ton of sense</li>
</ul>
</div>

<br><br>
<footer>
    <p class="copyright text-muted" align="center">Copyright &copy; 2017 Jeff Goldsmith</p>
</footer>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
